<extend name="Public/base"/>

<block name="style">
    <link rel="stylesheet" href="__CSS__/BeatPicker.min.css"/>
    <link rel="stylesheet" href="__CSS__/newStyle.css"/>
    <style type="text/css">
        .dailyPaperTop{line-height: 40px;width: 900px;height: 40px;background: #21a5f999;margin-left: 30px;border-radius: 5px;margin-top: 10px;font-size: 15px;color: white;font-weight: bold;padding-left: 30px;}
        .dailyPaperYear{width: 930px;height: 50px;background: white;margin-left: 30px;border-radius: 5px;position: relative}
        .dailyPaperYear p:nth-of-type(1) a{font-size: 30px;line-height: 50px;margin-left: 30px;color: gray;width: 100px;float: left;}
        .dailyPaperYear p:nth-of-type(2){margin-left: 400px;font-size: 30px;color: red;line-height: 50px;width: 200px;text-align: center}
        .dailyPaperYear .dateChoose{width: 200px;height: 200px;background: #9c7878;position: absolute;z-index: 1;top:50px;display: none}
        #year:target{
            display: block;
        }
        .leftArrow{display: inline-block;float: left;margin-top: 10px;cursor: pointer}
        .rightArrow{display: inline-block;float: right;margin-top: 10px;cursor: pointer}
        .dailyPaperYear .splitLine{width: 930px;height: 30px;background: #21a5f999;border-radius: 5px;}
        .dailyPaperYear .date{width: 930px;background-color: white;padding-bottom: 50px;overflow: hidden}
        .dailyPaperYear .date .day{width: 132px;height: 90px;background-color: white;border-bottom: 1px solid #80747433;float: left;border-right: 1px solid #80747433;}

        .dailyPaperYear .date > div:nth-child(7n+1){background-color: lightgray;}
        .dailyPaperYear .date > div:nth-child(7n+7){background-color: lightgray;border-right: 0px}
        .dailyPaperYear .date .day aside{margin-left: 100px;margin-top: 5px;font-size: 20px;font-weight: bold;}
        .dailyPaperYear .date .day .businessInput{opacity: 0.8;border: 0px;width: 90%;background-color: #f009;color: white;margin-top: 7px;margin-left: 8px;border-radius: 5px}
        .dailyPaperYear .date .day .financeInput{opacity: 0.8;border: 0px;width: 90%;margin-left: 8px;border-radius: 5px;background-color: #00f6ff99;margin-top: 5px;color: white}
    </style>
</block>
<block name="body">
    <div class="nav">资产日报 &gt; 资产日报查询</div>
    <div class="dailyPaperTop">日报查看</div>
    <div class="dailyPaperYear">
        <p><a href="#year" ><span id="dateYear"></span>年</a></p>
        <div class="dateChoose" id="year"></div>
        <p> <canvas id="leftArrow" class="leftArrow" width="20px" height="30px"></canvas><span id="month"></span>月<canvas id="rightArrow" class="rightArrow" width="20px" height="30px"></canvas></p>
        <div class="splitLine"></div>
        <div class="date" id="date">
            <div class="day"></div>
            <div class="day"></div>
            <div class="day">
                <aside>29</aside>
                <a href="#"><button class="businessInput">业务录入</button></a>
                <a href="#"><button class="financeInput">财务录入</button></a>
            </div>
        </div>
    </div>


</block>

<block name="script">
    <script><if condition="($Think.request.status neq '') OR ($Think.request.s_time neq '') OR ($Think.request.e_time neq '') ">toggel("reSearchM");<else />toggel("RCsearch");</if></script>
    <script src="__JS__/BeatPicker.min.js"></script>
    <script src="__JS__/changeDate.js"></script>
    <script type="text/javascript">
        var chineseToNumber = {'一':1,'二':2,'三':3,'四':4,'五':5,'六':6,'七':7,'八':8,'九':9,'十':10,'十一':11,'十二':12};
        var numberToChinese = {'1':'一','2':'二','3':'三','4':'四','5':'五','6':'六','7':'七','8':'八','9':'九','10':'十','11':'十一','12':'十二'}
        function DatePaper(year,month){
            this.year = year;
            this.month = month;
            this.display=function(){
                var _data={'year':this.year,'month':this.month}
                var url = "/admin/" + "new_report-getdailypaperdate.html";
                $.get(url,_data,function(response){
                    var date_html = '';
                    for(var i=0;i<response.length;i++){
                      date_html = date_html +' <div class="day"><aside>'+ response[i].substring(8,10)+'</aside><a href="#"><button class="businessInput">业务录入</button></a><a href="#"><button class="financeInput">财务录入</button></a> </div>'
                    }
                    $("#date").html(date_html)
                })
            }
        }
        $("#leftArrow").on('click',function(){
            var year = $("#dateYear").text();
            var month = $("#month").text();
            month = chineseToNumber[month]
            if(month == 1){
                year = year - 1;
                $("#dateYear").text(year);
                $("#month").text(numberToChinese['12'])
                var a = new DatePaper(year, 12);
                a.display()
            }else{
                month = month - 1;
                month = numberToChinese[month];
                $("#month").text(month)
                var a = new DatePaper(year, chineseToNumber[month]);
                a.display()
            }
        })

        $("#rightArrow").on('click',function(){
            var year = $("#dateYear").text();
            var month = $("#month").text();
            month = chineseToNumber[month];
            if(month == 12){
                year = parseInt(year) + 1;
                $("#dateYear").text(year);
                $("#month").text(numberToChinese['1'])
                var a = new DatePaper(year, 1);
                a.display()
            }else{
                month = month + 1;
                month = numberToChinese[month];
                $("#month").text(month)
                var a = new DatePaper(year, chineseToNumber[month]);
                a.display()
            }
        })


        $(function(){
            var date=new Date;
            $("#dateYear").text(date.getFullYear());
            $("#month").text(numberToChinese[date.getMonth() +1])
            var a = new DatePaper(date.getFullYear(),date.getMonth() +1);
            a.display();

            var leftArrowC = document.getElementById("leftArrow")
            var leftArrowCtx = leftArrowC.getContext("2d");
            leftArrowCtx.moveTo(10,0);
            leftArrowCtx.lineTo(0,15);
            leftArrowCtx.lineTo(10,30);
            leftArrowCtx.strokeStyle = 'rgba(0,0,255,1)';
            leftArrowCtx.stroke()

            var rightArrowC = document.getElementById("rightArrow")
            var rightArrowCtx = rightArrowC.getContext("2d");
            rightArrowCtx.moveTo(10,0);
            rightArrowCtx.lineTo(20,15);
            rightArrowCtx.lineTo(10,30);
            rightArrowCtx.strokeStyle = 'rgba(0,0,255,1)';
            rightArrowCtx.stroke()

        })


    </script>
</block>